---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "restful_resource Resource - terraform-provider-restful"
subcategory: ""
description: |-
  restful_resource manages a restful resource.
---

# restful_resource (Resource)

`restful_resource` manages a restful resource.

## Example Usage

```terraform
resource "restful_resource" "rg" {
  path = format("/subscriptions/%s/resourceGroups/%s", var.subscription_id, "example")
  query = {
    api-version = ["2020-06-01"]
  }
  create_method = "PUT"
  poll_delete = {
    status_locator = "code"
    status = {
      success = "404"
      pending = ["202", "200"]
    }
  }
  body = jsonencode({
    location = "westus"
    tags = {
      foo = "bar"
    }
  })
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `body` (String) The properties of the resource.
- `path` (String) The path used to create the resource, relative to the `base_url` of the provider.

### Optional

- `check_existance` (Boolean) Whether to check resource already existed? Defaults to `false`.
- `create_method` (String) The method used to create the resource. Possible values are `PUT` and `POST`. This overrides the `create_method` set in the provider block (defaults to POST).
- `delete_method` (String) The method used to delete the resource. Possible values are `DELETE` and `POST`. This overrides the `delete_method` set in the provider block (defaults to DELETE).
- `delete_path` (String) The API path used to delete the resource. The `id` is used instead if `delete_path` is absent. The path can be string literal, or combined by followings: `$(path)` expanded to `path`, `$(body.x.y.z)` expands to the `x.y.z` property (urlencoded) in API body, `#(body.id)` expands to the `id` property, with `base_url` prefix trimmed.
- `header` (Map of String) The header parameters that are applied to each request. This overrides the `header` set in the provider block.
- `merge_patch_disabled` (Boolean) Whether to use a JSON Merge Patch as the request body in the PATCH update? This is only effective when `update_method` is set to `PATCH`. This overrides the `merge_patch_disabled` set in the provider block (defaults to `false`).
- `poll_create` (Attributes) The polling option for the "Create" operation (see [below for nested schema](#nestedatt--poll_create))
- `poll_delete` (Attributes) The polling option for the "Delete" operation (see [below for nested schema](#nestedatt--poll_delete))
- `poll_update` (Attributes) The polling option for the "Update" operation (see [below for nested schema](#nestedatt--poll_update))
- `precheck_create` (Attributes) The precheck that is prior to the "Create" operation. (see [below for nested schema](#nestedatt--precheck_create))
- `precheck_delete` (Attributes) The precheck that is prior to the "Delete" operation. (see [below for nested schema](#nestedatt--precheck_delete))
- `precheck_update` (Attributes) The precheck that is prior to the "Update" operation. (see [below for nested schema](#nestedatt--precheck_update))
- `query` (Map of List of String) The query parameters that are applied to each request. This overrides the `query` set in the provider block.
- `read_body_locator` (String) Specifies how to locate the resource body in the read response. The format is `body.path`, where the `path` is using the gjson syntax[gjson syntax](https://github.com/tidwall/gjson/blob/master/SYNTAX.md).
- `read_path` (String) The API path used to read the resource, which is used as the `id`. The `path` is used as the `id` instead if `read_path` is absent. The path can be string literal, or combined by followings: `$(path)` expanded to `path`, `$(body.x.y.z)` expands to the `x.y.z` property (urlencoded) in API body, `#(body.id)` expands to the `id` property, with `base_url` prefix trimmed.
- `update_method` (String) The method used to update the resource. Possible values are `PUT` and `PATCH`. This overrides the `update_method` set in the provider block (defaults to PUT).
- `update_path` (String) The API path used to update the resource. The `id` is used instead if `update_path` is absent. The path can be string literal, or combined by followings: `$(path)` expanded to `path`, `$(body.x.y.z)` expands to the `x.y.z` property (urlencoded) in API body, `#(body.id)` expands to the `id` property, with `base_url` prefix trimmed.
- `write_only_attrs` (List of String) A list of paths (in [gjson syntax](https://github.com/tidwall/gjson/blob/master/SYNTAX.md)) to the attributes that are only settable, but won't be read in GET response.

### Read-Only

- `id` (String) The ID of the Resource.
- `output` (String) The response body after reading the resource.

<a id="nestedatt--poll_create"></a>
### Nested Schema for `poll_create`

Required:

- `status` (Attributes) The expected status sentinels for each polling state. (see [below for nested schema](#nestedatt--poll_create--status))
- `status_locator` (String) Specifies how to discover the status property. The format is either `code` or `scope.path`, where `scope` can be either `header` or `body`, and the `path` is using the [gjson syntax](https://github.com/tidwall/gjson/blob/master/SYNTAX.md).

Optional:

- `default_delay_sec` (Number) The interval between two pollings if there is no `Retry-After` in the response header, in second.
- `header` (Map of String) The header parameters. This overrides the `header` set in the resource block.
- `url_locator` (String) Specifies how to discover the polling url. The format can be one of `header.path` (use the property at `path` in response header), `body.path` (use the property at `path` in response body) or `exact.value` (use the exact `value`). When absent, the resource's path is used for polling.

<a id="nestedatt--poll_create--status"></a>
### Nested Schema for `poll_create.status`

Required:

- `success` (String) The expected status sentinel for suceess status.

Optional:

- `pending` (List of String) The expected status sentinels for pending status.



<a id="nestedatt--poll_delete"></a>
### Nested Schema for `poll_delete`

Required:

- `status` (Attributes) The expected status sentinels for each polling state. (see [below for nested schema](#nestedatt--poll_delete--status))
- `status_locator` (String) Specifies how to discover the status property. The format is either `code` or `scope.path`, where `scope` can be either `header` or `body`, and the `path` is using the [gjson syntax](https://github.com/tidwall/gjson/blob/master/SYNTAX.md).

Optional:

- `default_delay_sec` (Number) The interval between two pollings if there is no `Retry-After` in the response header, in second.
- `header` (Map of String) The header parameters. This overrides the `header` set in the resource block.
- `url_locator` (String) Specifies how to discover the polling url. The format can be one of `header.path` (use the property at `path` in response header), `body.path` (use the property at `path` in response body) or `exact.value` (use the exact `value`). When absent, the resource's path is used for polling.

<a id="nestedatt--poll_delete--status"></a>
### Nested Schema for `poll_delete.status`

Required:

- `success` (String) The expected status sentinel for suceess status.

Optional:

- `pending` (List of String) The expected status sentinels for pending status.



<a id="nestedatt--poll_update"></a>
### Nested Schema for `poll_update`

Required:

- `status` (Attributes) The expected status sentinels for each polling state. (see [below for nested schema](#nestedatt--poll_update--status))
- `status_locator` (String) Specifies how to discover the status property. The format is either `code` or `scope.path`, where `scope` can be either `header` or `body`, and the `path` is using the [gjson syntax](https://github.com/tidwall/gjson/blob/master/SYNTAX.md).

Optional:

- `default_delay_sec` (Number) The interval between two pollings if there is no `Retry-After` in the response header, in second.
- `header` (Map of String) The header parameters. This overrides the `header` set in the resource block.
- `url_locator` (String) Specifies how to discover the polling url. The format can be one of `header.path` (use the property at `path` in response header), `body.path` (use the property at `path` in response body) or `exact.value` (use the exact `value`). When absent, the resource's path is used for polling.

<a id="nestedatt--poll_update--status"></a>
### Nested Schema for `poll_update.status`

Required:

- `success` (String) The expected status sentinel for suceess status.

Optional:

- `pending` (List of String) The expected status sentinels for pending status.



<a id="nestedatt--precheck_create"></a>
### Nested Schema for `precheck_create`

Required:

- `path` (String) The path used to query readiness, relative to the `base_url` of the provider.
- `status` (Attributes) The expected status sentinels for each polling state. (see [below for nested schema](#nestedatt--precheck_create--status))
- `status_locator` (String) Specifies how to discover the status property. The format is either `code` or `scope.path`, where `scope` can be either `header` or `body`, and the `path` is using the [gjson syntax](https://github.com/tidwall/gjson/blob/master/SYNTAX.md).

Optional:

- `default_delay_sec` (Number) The interval between two pollings if there is no `Retry-After` in the response header, in second.
- `header` (Map of String) The header parameters. This overrides the `header` set in the resource block.
- `query` (Map of List of String) The query parameters. This overrides the `query` set in the resource block.

<a id="nestedatt--precheck_create--status"></a>
### Nested Schema for `precheck_create.status`

Required:

- `success` (String) The expected status sentinel for suceess status.

Optional:

- `pending` (List of String) The expected status sentinels for pending status.



<a id="nestedatt--precheck_delete"></a>
### Nested Schema for `precheck_delete`

Required:

- `status` (Attributes) The expected status sentinels for each polling state. (see [below for nested schema](#nestedatt--precheck_delete--status))
- `status_locator` (String) Specifies how to discover the status property. The format is either `code` or `scope.path`, where `scope` can be either `header` or `body`, and the `path` is using the [gjson syntax](https://github.com/tidwall/gjson/blob/master/SYNTAX.md).

Optional:

- `default_delay_sec` (Number) The interval between two pollings if there is no `Retry-After` in the response header, in second.
- `header` (Map of String) The header parameters. This overrides the `header` set in the resource block.
- `path` (String) The path used to query readiness, relative to the `base_url` of the provider. By default, the `id` of this resource is used.
- `query` (Map of List of String) The query parameters. This overrides the `query` set in the resource block.

<a id="nestedatt--precheck_delete--status"></a>
### Nested Schema for `precheck_delete.status`

Required:

- `success` (String) The expected status sentinel for suceess status.

Optional:

- `pending` (List of String) The expected status sentinels for pending status.



<a id="nestedatt--precheck_update"></a>
### Nested Schema for `precheck_update`

Required:

- `status` (Attributes) The expected status sentinels for each polling state. (see [below for nested schema](#nestedatt--precheck_update--status))
- `status_locator` (String) Specifies how to discover the status property. The format is either `code` or `scope.path`, where `scope` can be either `header` or `body`, and the `path` is using the [gjson syntax](https://github.com/tidwall/gjson/blob/master/SYNTAX.md).

Optional:

- `default_delay_sec` (Number) The interval between two pollings if there is no `Retry-After` in the response header, in second.
- `header` (Map of String) The header parameters. This overrides the `header` set in the resource block.
- `path` (String) The path used to query readiness, relative to the `base_url` of the provider. By default, the `id` of this resource is used.
- `query` (Map of List of String) The query parameters. This overrides the `query` set in the resource block.

<a id="nestedatt--precheck_update--status"></a>
### Nested Schema for `precheck_update.status`

Required:

- `success` (String) The expected status sentinel for suceess status.

Optional:

- `pending` (List of String) The expected status sentinels for pending status.

## Import

Import is supported using the following syntax:

```shell
# The import spec consists of following keys:
#
# - id (Required)               : The resource id.
# - path (Required)             : The path used to create the resource.
# - update_path (Optional)      : The path used to update the resource.
# - delete_path (Optional)      : The path used to delete the resource.
# - query (Optional)            : The query parameters.
# - header (Optional)           : The header.
# - create_method (Optional)    : The method used to create the resource. Defaults to POST.
# - update_method (Optional)    : The method used to update the resource. Defaults to PUT
# - delete_method (Optional)    : The method used to delete the resource. Defaults to DELETE.
# - body (Optional)             : The interested properties in the response body that you want to manage via this resource. If you omit this, then all the properties will be keeping track, which in 
#                                 most cases is not what you want (e.g. the read only attributes shouldn't be managed).
#                                 The value of each property is not important here, hence leave them as `null`.
terraform import restful_resource.example '{
  "id": "/subscriptions/0-0-0-0/resourceGroups/example",
  "path": "/subscriptions/0-0-0-0/resourceGroups/example",
  "query": {"api-version": ["2020-06-01"]},
  "create_method": "PUT",
  "body": {
    "location": null,
    "tags": null
  }
}'
```
