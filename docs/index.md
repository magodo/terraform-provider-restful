---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "restful Provider"
subcategory: ""
description: |-
  The restful provider provides resource and data source to interact with a platform that exposes a restful API.
---

# restful Provider

The restful provider provides resource and data source to interact with a platform that exposes a restful API.

## Example Usage

```terraform
terraform {
  required_providers {
    restful = {
      source = "magodo/restful"
    }
  }
}

provider "restful" {
  base_url = "http://localhost:3000"
  securty  = {} # optional
  alias    = "no_auth"
}

provider "restful" {
  base_url = "http://localhost:3000"
  security = {
    http = {
      basic = {
        username = "foo"
        password = "bar"
      }
    }
  }
  alias = "http_basic"
}

provider "restful" {
  base_url = "http://localhost:3000"
  security = {
    http = {
      token = {
        token = "MYTOKEN"
      }
    }
  }
  alias = "http_token"
}

provider "restful" {
  base_url = "http://localhost:3000"
  security = {
    apikey = [
      {
        in    = "header"
        name  = "Fastly-Key"
        value = "AAAAAAABBBBBBCCCCCC"
      },
    ]
  }
  alias = "api_key"
}

provider "restful" {
  base_url = "https://management.azure.com"
  security = {
    oauth2 = {
      client_credentials = {
        client_id     = var.client_id
        client_secret = var.client_secret
        token_url     = format("https://login.microsoftonline.com/%s/oauth2/v2.0/token", var.tenant_id)
        scopes        = ["https://management.azure.com/.default"]
      }
    }
  }
  alias = "oauth2_client_credentials"
}

provider "restful" {
  base_url = var.base_url
  security = {
    oauth2 = {
      password = {
        token_url = format("%s/auth/login", var.base_url)
        username  = var.username
        password  = var.password
      }
    }
  }
  alias = "oauth2_password"
}

provider "restful" {
  base_url = "https://management.azure.com"
  security = {
    oauth2 = {
      refresh_token = {
        token_url     = format("https://login.microsoftonline.com/%s/oauth2/v2.0/token", var.tenant_id)
        refresh_token = var.refresh_token
      }
    }
  }
  alias = "oauth2_refresh_token"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `base_url` (String) The base URL of the API provider.

### Optional

- `client` (Attributes) The client configuration (see [below for nested schema](#nestedatt--client))
- `create_method` (String) The method used to create the resource. Possible values are `PUT` and `POST`. Defaults to `POST`.
- `delete_method` (String) The method used to delete the resource. Possible values are `DELETE` and `POST`. Defaults to `DELETE`.
- `header` (Map of String) The header parameters that are applied to each request.
- `merge_patch_disabled` (Boolean) Whether to use a JSON Merge Patch as the request body in the PATCH update? Defaults to `false`. This is only effective when `update_method` is set to `PATCH`.
- `query` (Map of List of String) The query parameters that are applied to each request.
- `security` (Attributes) The OpenAPI security scheme that is be used for auth. Only one of `http`, `apikey` and `oauth2` can be specified. (see [below for nested schema](#nestedatt--security))
- `update_method` (String) The method used to update the resource. Possible values are `PUT` and `PATCH`. Defaults to `PUT`.

<a id="nestedatt--client"></a>
### Nested Schema for `client`

Optional:

- `certificates` (Attributes List) The client certificates for mTLS. (see [below for nested schema](#nestedatt--client--certificates))
- `cookie_enabled` (Boolean) Save cookies during API contracting. Defaults to `false`.
- `retry` (Attributes) The retry option for the client (see [below for nested schema](#nestedatt--client--retry))
- `root_ca_certificate_files` (List of String) The list of certificate file paths of root certificate authorities that clients use when verifying server certificates. If not specified, TLS uses the host's root CA set. Conflicts with `root_ca_certificate_files`.
- `root_ca_certificates` (List of String) The list of certificates of root certificate authorities that clients use when verifying server certificates. If not specified, TLS uses the host's root CA set. Conflicts with `root_ca_certificate_files`.
- `tls_insecure_skip_verify` (Boolean) Whether a client verifies the server's certificate chain and host name. Defaults to `false`.

<a id="nestedatt--client--certificates"></a>
### Nested Schema for `client.certificates`

Optional:

- `certificate` (String) The client certificate for mTLS. Conflicts with `certificate_file`. Requires `key_file` or `key`.
- `certificate_file` (String) The path of the client certificate file for mTLS. Conflicts with `certificate`. Requires `key_file` or `key`.
- `key` (String) The client private key for mTLS. Conflicts with `key_file`.
- `key_file` (String) The path of the client private key file for mTLS. Conflicts with `key`. Requires `certificate_file` or `certificate`.


<a id="nestedatt--client--retry"></a>
### Nested Schema for `client.retry`

Required:

- `status` (Attributes) The expected status sentinels. (see [below for nested schema](#nestedatt--client--retry--status))
- `status_locator` (String) Specifies how to discover the status property. The format is either `code` or `scope.path`, where `scope` can be either `header` or `body`, and the `path` is using the gjson syntax. In most case, you shall use `code`, as you most not expect a write-like operation to perform multiple times.

Optional:

- `count` (Number) The maximum allowed retries. Defaults to `3`.
- `max_wait_in_sec` (Number) The maximum allowed retry wait time. Defaults to `3600`.
- `wait_in_sec` (Number) The initial retry wait time between two retries in second, if there is no `Retry-After` in the response header, or the `Retry-After` is less than this. The wait time will be increased in capped exponential backoff with jitter, at most up to `max_wait_in_sec` (if not null). Defaults to `1`.

<a id="nestedatt--client--retry--status"></a>
### Nested Schema for `client.retry.status`

Required:

- `success` (String) The expected status sentinel for suceess status.

Optional:

- `pending` (List of String) The expected status sentinels for pending status.




<a id="nestedatt--security"></a>
### Nested Schema for `security`

Optional:

- `apikey` (Attributes Set) Configuration for the API Key authentication scheme. (see [below for nested schema](#nestedatt--security--apikey))
- `http` (Attributes) Configuration for the HTTP authentication scheme. Exactly one of `basic` and `token` must be specified. (see [below for nested schema](#nestedatt--security--http))
- `oauth2` (Attributes) Configuration for the OAuth2 authentication scheme. Exactly one of `password`, `client_credentials` and `refresh_token` must be specified. (see [below for nested schema](#nestedatt--security--oauth2))

<a id="nestedatt--security--apikey"></a>
### Nested Schema for `security.apikey`

Required:

- `in` (String) Specifies how is the API Key is sent. Possible values are `query`, `header` and `cookie`.
- `name` (String) The API Key name
- `value` (String) The API Key value


<a id="nestedatt--security--http"></a>
### Nested Schema for `security.http`

Optional:

- `basic` (Attributes) Basic authentication (see [below for nested schema](#nestedatt--security--http--basic))
- `token` (Attributes) Auth token (e.g. Bearer). (see [below for nested schema](#nestedatt--security--http--token))

<a id="nestedatt--security--http--basic"></a>
### Nested Schema for `security.http.basic`

Required:

- `password` (String, Sensitive) The password
- `username` (String) The username


<a id="nestedatt--security--http--token"></a>
### Nested Schema for `security.http.token`

Required:

- `token` (String, Sensitive) The value of the token.

Optional:

- `scheme` (String) The auth scheme. Defaults to `Bearer`.



<a id="nestedatt--security--oauth2"></a>
### Nested Schema for `security.oauth2`

Optional:

- `client_credentials` (Attributes) [Client credentials](https://www.rfc-editor.org/rfc/rfc6749#section-4.4). (see [below for nested schema](#nestedatt--security--oauth2--client_credentials))
- `password` (Attributes) [Resource owner password credential](https://www.rfc-editor.org/rfc/rfc6749#section-4.3). (see [below for nested schema](#nestedatt--security--oauth2--password))
- `refresh_token` (Attributes) [Refresh token](https://www.rfc-editor.org/rfc/rfc6749#section-6). (see [below for nested schema](#nestedatt--security--oauth2--refresh_token))

<a id="nestedatt--security--oauth2--client_credentials"></a>
### Nested Schema for `security.oauth2.client_credentials`

Required:

- `client_id` (String) The application's ID.
- `client_secret` (String, Sensitive) The application's secret.
- `token_url` (String) The token URL to be used for this flow.

Optional:

- `endpoint_params` (Map of List of String) The additional parameters for requests to the token endpoint.
- `in` (String) Specifies how is th client ID & secret sent. Possible values are `params` and `header`. If absent, the style used will be auto detected.
- `scopes` (List of String) The optional requested permissions.


<a id="nestedatt--security--oauth2--password"></a>
### Nested Schema for `security.oauth2.password`

Required:

- `password` (String, Sensitive) The password.
- `token_url` (String) The token URL to be used for this flow.
- `username` (String) The username.

Optional:

- `client_id` (String) The application's ID.
- `client_secret` (String, Sensitive) The application's secret.
- `in` (String) Specifies how is th client ID & secret sent. Possible values are `params` and `header`. If absent, the style used will be auto detected.
- `scopes` (List of String) The optional requested permissions.


<a id="nestedatt--security--oauth2--refresh_token"></a>
### Nested Schema for `security.oauth2.refresh_token`

Required:

- `refresh_token` (String, Sensitive) The refresh token.
- `token_url` (String) The token URL to be used for this flow.

Optional:

- `client_id` (String) The application's ID.
- `client_secret` (String, Sensitive) The application's secret.
- `in` (String) Specifies how is th client ID & secret sent. Possible values are `params` and `header`. If absent, the style used will be auto detected.
- `scopes` (List of String) The optional requested permissions.
- `token_type` (String) The type of the access token. Defaults to "Bearer".
