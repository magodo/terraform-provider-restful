---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "restful_action Action - terraform-provider-restful"
subcategory: ""
description: |-
  restful_action represents an ad-hoc API call action.
---

# restful_action (Action)

`restful_action` represents an ad-hoc API call action.



<!-- action schema generated by tfplugindocs -->
## Schema

### Required

- `method` (String) The HTTP method for the `Invoke` call. Possible values are `HEAD`, `GET`, `PUT`, `POST`, `PATCH` and `DELETE`.
- `path` (String) The path for the `Invoke` call, relative to the `base_url` of the provider.

### Optional

> **NOTE**: [Write-only arguments](https://developer.hashicorp.com/terraform/language/resources/ephemeral#write-only-arguments) are supported in Terraform 1.11 and later.

- `body` (Dynamic) The payload for the `Invoke` call.
- `ephemeral_body` (Dynamic, [Write-only](https://developer.hashicorp.com/terraform/language/resources/ephemeral#write-only-arguments)) The ephemeral (write-only) properties of the resource. This will be merge-patched to the `body` to construct the actual request body.
- `header` (Map of String) The header parameters for the `Invoke` call. This overrides the `header` set in the provider block.
- `poll` (Attributes) The polling option for the "Invoke" operation (see [below for nested schema](#nestedatt--poll))
- `precheck` (Attributes List) An array of prechecks that need to pass prior to the "Invoke" operation. Exactly one of `mutex` or `api` should be specified. (see [below for nested schema](#nestedatt--precheck))
- `query` (Map of List of String) The query parameters for the `Invoke` call. This overrides the `query` set in the provider block.

<a id="nestedatt--poll"></a>
### Nested Schema for `poll`

Required:

- `status` (Attributes) The expected status sentinels for each polling state. (see [below for nested schema](#nestedatt--poll--status))
- `status_locator` (String) Specifies how to discover the status property. The format is either `code` or `scope.path`, where `scope` can be either `header` or `body`, and the `path` is using the [gjson syntax](https://github.com/tidwall/gjson/blob/master/SYNTAX.md). The `path` can contain `$(body.x.y.z)` parameter that reference property from either the response body (for `Create`, after selector), or `state.output` (for `Read`/`Update`/`Delete`).

Optional:

- `default_delay_sec` (Number) The interval between two pollings if there is no `Retry-After` in the response header, in second. Defaults to `10`.
- `header` (Map of String) The header parameters. This overrides the `header` set in the resource block.
- `message_template` (String) The raw template for the progress message that will be displayed in the Terraform UI. This can be a string literal, or combined by the body param: `$(body.x.y.z)` that expands to the `x.y.z` property of the API body. It can add a chain of functions (applied from left to right), in the form of `$f1.f2(body)`. Supported functions include: `escape` (URL path escape, by default applied), `unescape` (URL path unescape), `query_escape` (URL query escape), `query_unescape` (URL query unescape), `base` (filepath base), `url_path` (path segment of a URL), `trim_path` (trim `path`). By default, it displays "Waiting for HTTP request to finish...".
- `selector` (String) A selector expression in [gjson query syntax](https://github.com/tidwall/gjson/blob/master/SYNTAX.md#queries), that is used when read returns a collection of resources, to select exactly one member resource of from it. This can be a string literal, or combined by the body param: `$(body.x.y.z)` that expands to the `x.y.z` property of the API body. It can add a chain of functions (applied from left to right), in the form of `$f1.f2(body)`. Supported functions include: `escape` (URL path escape, by default applied), `unescape` (URL path unescape), `query_escape` (URL query escape), `query_unescape` (URL query unescape), `base` (filepath base), `url_path` (path segment of a URL), `trim_path` (trim `path`). By default, the whole response body is used as the body.
- `url_locator` (String) Specifies how to discover the polling url. The format can be one of `header.path` (use the property at `path` in response header), `body.path` (use the property at `path` in response body) or `exact.value` (use the exact `value`). When absent, the current operation's URL is used for polling, execpt `Create` where it fallbacks to use the path constructed by the `read_path` as the polling URL.

<a id="nestedatt--poll--status"></a>
### Nested Schema for `poll.status`

Required:

- `success` (String) The expected status sentinel for suceess status.

Optional:

- `pending` (List of String) The expected status sentinels for pending status.



<a id="nestedatt--precheck"></a>
### Nested Schema for `precheck`

Optional:

- `api` (Attributes) Keeps waiting until the specified API meets the success status (see [below for nested schema](#nestedatt--precheck--api))
- `mutex` (String) The name of the mutex, which implies the resource will keep waiting until this mutex is held

<a id="nestedatt--precheck--api"></a>
### Nested Schema for `precheck.api`

Required:

- `path` (String) The path used to query readiness, relative to the `base_url` of the provider.
- `status` (Attributes) The expected status sentinels for each polling state. (see [below for nested schema](#nestedatt--precheck--api--status))
- `status_locator` (String) Specifies how to discover the status property. The format is either `code` or `scope.path`, where `scope` can be either `header` or `body`, and the `path` is using the [gjson syntax](https://github.com/tidwall/gjson/blob/master/SYNTAX.md).

Optional:

- `default_delay_sec` (Number) The interval between two pollings if there is no `Retry-After` in the response header, in second. Defaults to `10`.
- `header` (Map of String) The header parameters. This overrides the `header` set in the resource block.
- `query` (Map of List of String) The query parameters. This overrides the `query` set in the resource block.

<a id="nestedatt--precheck--api--status"></a>
### Nested Schema for `precheck.api.status`

Required:

- `success` (String) The expected status sentinel for suceess status.

Optional:

- `pending` (List of String) The expected status sentinels for pending status.
